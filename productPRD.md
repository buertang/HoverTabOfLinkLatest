# HoverTabOfLink 产品需求文档 (PRD)

**版本: 1.2**

**日期: 2025年9月3日**

## 1. 产品概述

### 1.1. 产品名称

HoverTabOfLink

### 1.2. 产品愿景

HoverTabOfLink 是一款现代化的浏览器链接预览工具，旨在通过提供流畅、高效、可高度自定义的悬浮窗口预览体验，以及未来规划的智能文本处理功能，帮助用户在不离开当前页面的情况下快速获取链接信息，从而提升网页浏览和信息获取的效率。

### 1.3. 目标用户

- **内容研究者与学生**: 需要快速查阅大量链接资料而不想频繁切换标签页的用户。
- **高效率工作者**: 希望在处理邮件、文档或项目管理工具时，快速预览相关链接内容的用户。
- **普通网民**: 在浏览论坛、新闻、社交媒体时，对链接内容感到好奇，但又不想打断当前浏览节奏的用户。

### 1.4. 技术栈

- **开发框架**: WXT
- **前端库**: React
- **语言**: TypeScript
- **扩展规范**: Manifest V3

## 2. 功能详述

### 2.1. 核心功能：链接预览悬浮窗

用户通过预设的触发方式（如悬停、拖拽链接等），可以在当前页面上打开一个悬浮窗口，用于加载和显示链接指向的网页内容。

#### 2.1.1. 悬浮窗结构

悬浮窗由 `Header`、`Content` 和 `Footer` 三部分组成。

- **Header (顶部)**
  - **网址显示区**:
    - **功能**: 显示当前预览页面的完整 URL。
    - **交互**: 点击该区域，将在浏览器新标签页中打开此链接。
  - **操作按钮区**:
    - **固定 (Pin)**: 点击后，悬浮窗将保持在当前位置，不会因鼠标移开或触发其他链接而关闭。再次点击可取消固定。
    - **刷新 (Refresh)**: 重新加载悬浮窗内的 `iframe` 内容。
    - **新标签页打开 (Open in New Tab)**: 在浏览器新标签页中打开当前预览的链接。
    - **关闭 (Close)**: 手动关闭当前悬浮窗。
- **Content (中部)**
  - **网页渲染区**:
    - **实现**: 使用 `<iframe>` 标签来嵌入和渲染目标链接的网页内容。
    - **注意**: 需要处理目标网站设置了 `X-Frame-Options` 导致无法嵌入的情况，届时应在窗口内给予用户友好提示。
  - **宽度调整把手**:
    - **位置**: 在 `iframe` 的左右两侧，各有一个细长的垂直容器。
    - **交互**: 用户可以拖拽这两个把手，实时调整悬浮窗的宽度。
- **Footer (底部)**
  - **高度调整把手**:
    - **位置**: 整个 Footer 的中间区域。
    - **交互**: 用户可以拖拽此区域，实时调整悬浮窗的高度。
  - **角调整把手 (等比缩放)**:
    - **位置**: Footer 的左下角和右下角，各有一个 1/4 圆弧形状的容器。
    - **交互**: 用户可以拖拽这两个角，同时调整悬浮窗的宽度和高度，实现右下角和左下角的自由缩放。

### 2.2. 设置面板 (侧边栏)

插件的设置面板将通过浏览器侧边栏（Side Panel）API 打开，为用户提供丰富的个性化配置选项。

#### 2.2.1. 总体布局

- **顶部菜单栏**:
  - **形式**: 一排图标按钮，横向排列。
  - **交互**: 鼠标悬浮在图标上时，显示该功能的中文名称 Tooltip（例如：“链接预览设置”）。
  - **功能**: 点击图标可切换下方显示的具体设置项。当前激活的菜单项应有高亮状态。
  - **菜单项**:
    1. **链接预览设置**: 核心的预览功能相关配置。
    2. **拖拽文字设置**: 拖拽页面选中文本后的交互设置。
    3. **语言设置**: 插件界面语言相关的设置。
- **设置内容区**:
  - 根据顶部菜单栏的选择，显示对应的设置表单。

#### 2.2.2. 链接预览设置项

- **触发方式**:
  - **控件**: 下拉选择框。
  - **选项**: 拖动链接、鼠标悬停、`Alt`+鼠标左键点击等。
  - **默认值**: 拖动链接。
- **自定义快捷键**:
  - **控件**: 下拉选择框。
  - **功能**: 允许用户选择一个修饰键 (如 `Alt`, `Ctrl`, `Shift`) 与特定操作组合，作为预览的触发方式之一。
  - **默认值**: Alt。
- **悬停延迟**:
  - **控件**: 滑块 (Slider) + 实时数值显示框。
  - **功能**: 当触发方式为“鼠标悬停”时，设置鼠标指针停留在链接上多长时间后才触发预览。
  - **范围**: 100ms - 2000ms。
  - **步长**: 每次调整增加或减少 200ms。
  - **默认值**: 100ms。
- **弹窗大小**:
  - **控件**: 下拉选择框或按钮组。
  - **选项**:
    - **上次大小**: 记住用户上次关闭悬浮窗时的尺寸。
    - **默认大小**: 一个固定的初始尺寸（如 800x600px）。
    - **内容自适应 (可选)**: 尝试根据 `iframe` 内容自动调整大小。
  - **默认值**: 上次大小。
- **弹窗位置**:
  - **控件**: 下拉选择框。
  - **选项**: 跟随鼠标、屏幕居中、屏幕右上角等。
  - **默认值**: 跟随鼠标。
- **弹窗主题**:
  - **控件**: 颜色选择卡片。
  - **功能**: 更改悬浮窗 `Header` 和 `Footer` 的背景色和文字颜色。
  - **预设主题**: 浅色、深色、蓝色、红色、黄色、绿色。
  - **自定义**: 点击后可弹出颜色选择器，让用户自定义主题颜色。
  - **默认值**: 绿色（如图所示的激活状态）。
- **背景遮罩透明度**:
  - **控件**: 滑块 (Slider) + 实时百分比显示框。
  - **功能**: 当鼠标悬浮/聚焦在悬浮窗时，为页面背景添加一层遮罩，用户可调整其透明度以突出预览内容。
  - **范围**: 0% (完全透明) - 100% (完全不透明)。
  - **默认值**: 50%。

#### 2.2.3. 拖拽文字设置

- **搜索引擎设置**:
  - **控件**: 下拉选择框。
  - **功能**: 设置拖拽选中文本后，默认使用的搜索引擎。
  - **默认值**: 必应搜索。
- **自动打开链接**:
  - **控件**: 下拉选择框。
  - **功能**: 如果拖拽的文本内容是链接，是否自动在预览窗口中打开。
  - **选项**: 是 / 否。
  - **默认值**: 否。
- **禁用网站命令**:
  - **控件**: 文本域 (Textarea)。
  - **功能**: 在列出的网站中，禁用通过拖拽文本进行搜索或打开链接的功能。支持通配符。

#### 2.2.4. 语言设置

- **语言**:
  - **控件**: 下拉选择框。
  - **功能**: 切换插件界面的显示语言。
  - **默认值**: 简体中文。

## 3. 非功能性需求

### 3.1. 性能

- **响应速度**: 触发预览后，悬浮窗应立即出现，无明显延迟。`iframe` 的加载时间取决于目标网站。
- **资源占用**: 插件在未激活状态下应保持极低的 CPU 和内存占用。

### 3.2. 兼容性

- **浏览器**: 应兼容主流的基于 Chromium 的浏览器，如 Google Chrome, Microsoft Edge。
- **操作系统**: 跨平台兼容 Windows, macOS, Linux。

### 3.3. 数据存储

- 所有用户设置项应使用 `chrome.storage.sync` 或 `chrome.storage.local` 进行持久化存储，以便在浏览器重启后保留配置。

## 4. 未来规划 (Roadmap)

- **智能文本处理**: 集成 AI 能力，可对预览内容进行一键总结、翻译、提取关键词等操作。
- **历史记录**: 提供一个预览历史列表，方便用户快速找到并重新打开之前预览过的链接。
- **多链接模式**: 允许用户同时固定多个预览窗口，方便进行内容对比。